<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Nivi Jha | Portfolio</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

    <%- include('../includes/navbar') %>
        <main>
            <%- body %>
                <div id="scroll-progress"></div>
        </main>

        <script>
            document.getElementById("year").textContent = new Date().getFullYear();
        </script>

        <%- include('../includes/footer') %>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

            <!-- Active nav highlight -->
            <script>
                const sections = document.querySelectorAll("section");
                const navLinks = document.querySelectorAll(".navbar .nav-link");

                window.addEventListener("scroll", () => {
                    let current = "";
                    sections.forEach(section => {
                        const top = section.offsetTop - 120;
                        const height = section.offsetHeight;
                        if (pageYOffset >= top && pageYOffset < top + height) {
                            current = section.getAttribute("id");
                        }
                    });

                    navLinks.forEach(link => {
                        link.classList.remove("active");
                        if (link.getAttribute("href") === "#" + current) {
                            link.classList.add("active");
                        }
                    });
                });
            </script>

            <!-- Fade-in animation -->
            <script>
                const reveals = document.querySelectorAll(".reveal, .reveal-stagger");

                const observer = new IntersectionObserver(
                    entries => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add("show");
                            }
                        });
                    },
                    { threshold: 0.15 }
                );

                reveals.forEach(el => observer.observe(el));
            </script>

            <!-- SCROLL PROGRESS BAR -->
            <script>
                const progressBar = document.getElementById("scroll-progress");

                window.addEventListener("scroll", () => {
                    const scrollTop = window.scrollY;
                    const docHeight =
                        document.documentElement.scrollHeight -
                        document.documentElement.clientHeight;

                    const scrollPercent = (scrollTop / docHeight) * 100;
                    progressBar.style.width = scrollPercent + "%";
                });
            </script>

            <!-- SUBTITLE TYPING EFFECT -->
            <script>
                const words = [
                    "scalable web apps",
                    "clean user interfaces",
                    "reliable backend systems",
                    "real-world solutions"
                ];

                let i = 0, j = 0, isDeleting = false;
                const typingSpeed = 90;
                const deletingSpeed = 50;
                const pause = 1200;

                const el = document.getElementById("typing-text");

                function type() {
                    const current = words[i];
                    if (!isDeleting) {
                        el.textContent = current.slice(0, j++);
                        if (j === current.length) {
                            setTimeout(() => isDeleting = true, pause);
                        }
                    } else {
                        el.textContent = current.slice(0, j--);
                        if (j === 0) {
                            isDeleting = false;
                            i = (i + 1) % words.length;
                        }
                    }
                    setTimeout(type, isDeleting ? deletingSpeed : typingSpeed);
                }

                type();
            </script>

            <!-- Contact form handler -->            
            <script src="/js/contactHandler.js"></script>

</body>

</html>